(function(){"use strict";var t={103:function(t,e,r){t.exports=r.p+"img/contentgen.drawio.743899f7.png"},1428:function(t,e,r){t.exports=r.p+"img/brTalkFlow.drawio.cc16644a.png"},2838:function(t,e,r){var a=r(2856),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("BrHeader"),e("router-view")],1)},i=[],o=function(){var t=this;t._self._c;return t._m(0)},l=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"d-flex justify-content-between align-items-md-center pb-3 mb-5 border-bottom"},[e("h1",{staticClass:"h4"},[e("a",{staticClass:"d-flex align-items-center text-dark text-decoration-none",attrs:{href:"/"}},[e("img",{staticClass:"d-inline-block me-2",attrs:{src:"https://developers.cloudflare.com/_astro/logo.DAG2yejx.svg",alt:"Browser Rendering",width:"32",height:"32"}}),e("span",[t._v("Browser Rendering")])])]),e("a",{attrs:{href:"https://developers.cloudflare.com/browser-rendering/",target:"_blank",rel:"noopener"}},[t._v("View more on Developer Docs")])])}],n=r(1656),c={},d=(0,n.A)(c,o,l,!1,null,null,null),u=d.exports,h={components:{BrHeader:u}},p=h,m=(0,n.A)(p,s,i,!1,null,null,null),b=m.exports,g=r(1594),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"brguides container py-4"},[e("h2",{staticClass:"mb-3"},[t._v("Browser Rendering Demo")]),t._m(0),e("ul",{staticClass:"list-unstyled mt-3"},t._l(t.resources,function(r,a){return e("li",{key:a,staticClass:"mb-2"},[e("router-link",{staticClass:"resource-link",attrs:{to:r.to}},[e("span",{staticClass:"icon-circle",attrs:{"aria-hidden":"true"}},[e("svg",{attrs:{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"}},[e("path",{attrs:{d:"M6 4l4 4-4 4",fill:"none",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"}})])]),e("span",{staticClass:"resource-title"},[t._v(t._s(r.title))])])],1)}),0)])},v=[function(){var t=this,e=t._self._c;return e("p",{staticClass:"text-muted"},[t._v(" Run headless Chrome on "),e("a",{attrs:{href:"https://www.cloudflare.com/zh-cn/network/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cloudflare's global network")]),t._v(" for browser automation, web scraping, testing, and content generation. ")])}],w={name:"BrGuides",data(){return{resources:[{to:"/br-introduction",title:"BR Introduction"},{to:"/content-generation",title:"BR REST API Demo"},{to:"/make-browser-talk",title:"Make your browser talk"}]}}},y=w,x=(0,n.A)(y,f,v,!1,null,"d591134c",null),_=x.exports,C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"puppetron container py-4 make-browser-talk"},[e("h1",[t._v("Make Your Browser Talk")]),t.lastError?e("div",{staticClass:"status",staticStyle:{color:"#b00020","margin-bottom":"0.6rem"},attrs:{"aria-live":"polite"}},[t._v(" "+t._s(t.lastError)+" ")]):t._e(),e("form",{staticClass:"talk-form",attrs:{id:"formtron"},on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"mode-row"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],attrs:{type:"radio",value:"text"},domProps:{checked:t._q(t.mode,"text")},on:{change:function(e){t.mode="text"}}}),t._v(" Text")]),e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],attrs:{type:"radio",value:"selector"},domProps:{checked:t._q(t.mode,"selector")},on:{change:function(e){t.mode="selector"}}}),t._v(" URL + Selector")])]),"text"===t.mode?e("div",[e("label",{staticClass:"label"},[t._v("Enter text for the browser to speak")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{placeholder:"Type something for the browser to say...",rows:"6"},domProps:{value:t.text},on:{input:[function(e){e.target.composing||(t.text=e.target.value)},t.onTextInput]}}),e("div",{staticStyle:{width:"90%","max-width":"900px","text-align":"left","font-size":"12px",color:"#666"}},[t._v(" "+t._s(t.text.length)+" / "+t._s(t.MAX_CHARS)+" chars ")])]):e("div",{staticClass:"selector-mode"},[e("label",{staticClass:"label"},[t._v("Target URL")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],attrs:{type:"url",placeholder:"https://example.com"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),e("label",{staticClass:"label",staticStyle:{"margin-top":"0.5rem"}},[t._v("CSS selector to extract (single)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.selector,expression:"selector"}],attrs:{type:"text",placeholder:"e.g. h1, .article .title"},domProps:{value:t.selector},on:{input:function(e){e.target.composing||(t.selector=e.target.value)}}}),e("p",{staticClass:"hint"},[t._v("Worker will call BR scrape with this selector and turn the extracted text into speech.")]),t.extractedText||t.rawBrJson?e("div",{staticClass:"extracted-preview card card-body",staticStyle:{"margin-top":"0.6rem","text-align":"left"}},[e("strong",[t._v("Extracted text (preview):")]),t.extractedText?e("p",[t._v(t._s(t.extractedText))]):e("p",{staticStyle:{color:"#666","font-style":"italic"}},[t._v("(no text extracted)")]),e("div",{staticStyle:{"margin-top":"0.4rem",display:"flex",gap:"0.5rem","flex-wrap":"wrap"}},[e("button",{attrs:{type:"button",disabled:!t.extractedText},on:{click:t.useExtractedText}},[t._v("Use as text")]),e("button",{attrs:{type:"button",disabled:!t.rawBrJson},on:{click:function(e){t.showRawBrJson=!t.showRawBrJson}}},[t._v(" "+t._s(t.showRawBrJson?"Hide raw BR JSON":"Show raw BR JSON")+" ")]),e("button",{attrs:{type:"button",disabled:!t.rawBrJson},on:{click:t.copyRawBrJson}},[t._v("Copy raw JSON")]),e("button",{attrs:{type:"button",disabled:!t.rawBrJson},on:{click:t.downloadRawBrJson}},[t._v("Download JSON")])]),t.showRawBrJson?e("div",{staticClass:"raw-json-wrapper",attrs:{"aria-hidden":"false"}},[t._m(0),e("pre",{staticClass:"raw-json-pre",domProps:{textContent:t._s(t.rawBrJsonPreview)}})]):t._e()]):t._e()]),e("div",{staticClass:"controls-row"},[e("div",{staticClass:"action-buttons"},[e("button",{attrs:{type:"button",disabled:!t.canRequest||t.isLoading,"aria-label":"Generate and play audio"},on:{click:t.requestTts}},[t._v(" "+t._s(t.isLoading?"Generating...":"Generate & Play")+" ")]),e("button",{attrs:{type:"button",disabled:!t.isPlaying||t.isPaused,"aria-label":"Pause"},on:{click:t.pauseAudio}},[t._v("⏸ Pause")]),e("button",{attrs:{type:"button",disabled:!t.isPaused,"aria-label":"Resume"},on:{click:t.resumeAudio}},[t._v("▶ Resume")]),e("button",{attrs:{type:"button",disabled:!t.isPlaying&&!t.isPaused,"aria-label":"Stop"},on:{click:t.stopAudio}},[t._v("■ Stop")]),e("button",{attrs:{type:"button",disabled:!t.audioUrl,"aria-label":"Download audio"},on:{click:t.downloadAudio}},[t._v("⬇ Download")])])]),e("div",{staticClass:"visual-row"},[e("div",{staticClass:"visualizer",class:{playing:t.isPlaying||t.isLoading},attrs:{"aria-hidden":"true"}},t._l(12,function(r){return e("div",{key:r,staticClass:"bar",style:t.barStyle(r)})}),0),"text"===t.mode&&t.words.length?e("div",{staticClass:"spoken-preview"},t._l(t.words,function(r,a){return e("span",{key:a,class:{highlight:a===t.currentWordIndex}},[t._v(" "+t._s(r)+" ")])}),0):t._e()]),e("div",{staticStyle:{width:"90%","max-width":"900px","margin-top":"1rem"},attrs:{id:"accordionExample","aria-multiselectable":"false"}},[e("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab",id:"headingThree"}},[e("h2",{staticClass:"mb-0"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseThree",modifiers:{collapseThree:!0}}],staticClass:"text-left",attrs:{variant:"link",block:""}},[t._v(" Make Your Browser Talk 的实现逻辑 ")])],1)]),e("b-collapse",{staticClass:"border-top",attrs:{id:"collapseThree",accordion:"accordionExample",role:"tabpanel","aria-labelledby":"headingThree"},model:{value:t.collapseThreeOpen,callback:function(e){t.collapseThreeOpen=e},expression:"collapseThreeOpen"}},[e("b-card-body",[t._v(" 前端向 Worker 发送请求，body 可以是直接 text，也可以是 url+selector（前端可提供 selector 文本框） "),t.collapseThreeOpen?e("div",{staticClass:"diagram-wrapper mt-3"},[t.imageUrl?e("img",{staticClass:"img-fluid diagram-img",attrs:{src:t.imageUrl,alt:t.imageAlt}}):e("div",{staticClass:"muted",staticStyle:{"font-size":"13px",color:"#567"}},[t._v("Loading image...")])]):t._e()])],1)],1)],1)]),t._m(1)])},k=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"raw-json-toolbar"},[e("span",{staticClass:"badge"},[t._v("Raw BR JSON")]),e("small",{staticClass:"muted"},[t._v(" — debug view (collapsed by default)")])])},function(){var t=this,e=t._self._c;return e("footer",[e("p",[t._v(" Make your browser talk via server TTS (BR → Workers AI → R2). Theme matches ContentGen. ")])])}],S=(r(4603),r(7566),r(8721),{name:"MakeBrowserTalk",data(){return{mode:"text",text:"",url:"",selector:"",isLoading:!1,isPlaying:!1,isPaused:!1,audioKey:null,audioUrl:null,audioEl:null,words:[],currentWordIndex:-1,highlightTimer:null,seed:Math.random(),extractedText:null,lastError:null,ttsAbortController:null,rawBrJson:null,showRawBrJson:!1,imageUrl:null,imageAlt:"Browser Rendering integration diagram",collapseThreeOpen:!1}},computed:{canRequest(){return"text"===this.mode?this.text.trim().length>0:"selector"===this.mode&&this.url.trim().length>0&&this.selector.trim().length>0},rawBrJsonPreview(){if(!this.rawBrJson)return"";if("string"===typeof this.rawBrJson)try{const t=JSON.parse(this.rawBrJson);return JSON.stringify(t,null,2)}catch(t){return this.rawBrJson}else try{return JSON.stringify(this.rawBrJson,null,2)}catch(t){return String(this.rawBrJson)}}},MAX_CHARS:8e3,mounted(){this.audioEl=document.createElement("audio"),this.audioEl.preload="auto";try{this.audioEl.crossOrigin="anonymous"}catch(t){console.debug("crossOrigin not supported:",t)}this.audioEl.onended=this.onAudioEnded,this.audioEl.onpause=()=>{this.isPaused=!0},this.audioEl.onplay=()=>{this.isPaused=!1},this.audioEl.onloadedmetadata=this.onAudioMetadata,this.audioEl.style.display="none";try{document.body.appendChild(this.audioEl)}catch(t){console.debug("append audioEl failed:",t)}this.onTextInput()},beforeUnmount(){this.cleanupAudio()},watch:{collapseThreeOpen(t){if(t&&!this.imageUrl)try{this.imageUrl=r(1428)}catch(e){console.debug("lazy load image failed",e),this.imageUrl=null}}},methods:{onTextInput(){this.words=this.text.trim().length?this.text.split(/\s+/):[],this.currentWordIndex=-1},async requestTts(){if(!this.canRequest||this.isLoading)return;this.isLoading=!0,this.lastError=null,this.stopAudio();try{this.ttsAbortController&&this.ttsAbortController.abort()}catch(e){console.debug("abort previous controller failed:",e)}this.ttsAbortController=new AbortController;const t={};"text"===this.mode?t.text=this.text:(t.url=this.url,t.selector=this.selector),t.format="mp3";try{const e=await fetch("/talk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:this.ttsAbortController.signal});if(!e.ok){const t=await e.text().catch(()=>"");throw new Error(`Server ${e.status}: ${t}`)}const r=await e.json();if(!r.key)throw new Error("No key returned from server");if(this.audioKey=r.key,r.extractedText){this.rawBrJson=r.extractedText;const t=this.tryParseAndExtract(r.extractedText);this.extractedText=t||("string"===typeof r.extractedText?r.extractedText:JSON.stringify(r.extractedText))}else this.extractedText=null,this.rawBrJson=null;await this.playKey(r.key)}catch(r){console.error("TTS request failed",r),this.lastError="TTS request failed: "+(r.message||r),alert("TTS request failed: "+(r.message||r))}finally{this.isLoading=!1,this.ttsAbortController=null}},tryParseAndExtract(t){try{if(!t)return"";let r=t;if("string"===typeof t)try{r=JSON.parse(t)}catch(e){const r=t.trim();return r.startsWith("{")||r.startsWith("[")?t:this.stripHtml(r)}if(!r)return"";if(Array.isArray(r.result)&&r.result.length)for(const t of r.result){if(Array.isArray(t.results)&&t.results.length){const e=t.results[0];if(e){if(e.text&&String(e.text).trim())return String(e.text).trim();if(e.html&&String(e.html).trim())return this.stripHtml(String(e.html))}}if(t.text&&String(t.text).trim())return String(t.text).trim();if(t.html&&String(t.html).trim())return this.stripHtml(String(t.html))}if("object"===typeof r.result&&null!==r.result){if(r.result.text&&String(r.result.text).trim())return String(r.result.text).trim();if(r.result.html&&String(r.result.html).trim())return this.stripHtml(String(r.result.html));if(Array.isArray(r.result.results)&&r.result.results.length){const t=r.result.results[0];if(t){if(t.text&&String(t.text).trim())return String(t.text).trim();if(t.html&&String(t.html).trim())return this.stripHtml(String(t.html))}}}if("string"===typeof r.result){const t=r.result.trim();return this.stripHtml(t)}if(r.text&&String(r.text).trim())return String(r.text).trim();if(r.html&&String(r.html).trim())return this.stripHtml(String(r.html));if(r.content&&String(r.content).trim())return this.stripHtml(String(r.content));try{return JSON.stringify(r)}catch(e){return String(r)}}catch(e){return console.debug("tryParseAndExtract failed:",e),""}},stripHtml(t){return t?String(t).replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?>[\s\S]*?<\/style>/gi,"").replace(/<\/?[^>]+>/g," ").replace(/\s+/g," ").trim():""},async playKey(t){const e=`/audio/${encodeURIComponent(t)}`;try{if(this.audioUrl&&this.audioUrl.startsWith("blob:"))try{URL.revokeObjectURL(this.audioUrl)}catch(r){console.debug("revoke previous blob failed:",r)}const t=await fetch(e);if(!t.ok){const e=await t.text().catch(()=>"");throw new Error(`Audio fetch failed ${t.status}: ${e}`)}const a=await t.blob();this.audioUrl=URL.createObjectURL(a),this.audioEl.src=this.audioUrl,await this.audioEl.play(),this.isPlaying=!0,this.isPaused=!1,"text"===this.mode?(this.words=this.text.trim().length?this.text.split(/\s+/):[],this.currentWordIndex=-1):(this.words=[],this.currentWordIndex=-1)}catch(a){console.error("play failed",a),this.lastError="Audio play failed: "+(a.message||a),alert("Audio play failed: "+(a.message||a)),this.isPlaying=!1,this.isPaused=!1}},onAudioMetadata(){if(!this.audioEl||!this.audioEl.duration||"text"!==this.mode||0===this.words.length)return;this.clearHighlightTimer();const t=Math.max(1e3,Math.floor(1e3*this.audioEl.duration)),e=Math.max(120,Math.floor(t/this.words.length));this.highlightTimer=setInterval(()=>{this.isPlaying&&!this.isPaused&&this.currentWordIndex<this.words.length-1&&this.currentWordIndex++},e)},pauseAudio(){if(this.audioEl)try{this.audioEl.pause(),this.isPaused=!0}catch(t){console.debug("pauseAudio error:",t)}},resumeAudio(){if(this.audioEl)try{this.audioEl.play(),this.isPaused=!1}catch(t){console.debug("resumeAudio error:",t)}},stopAudio(){if(this.audioEl){try{this.audioEl.pause(),this.audioEl.currentTime=0}catch(t){console.debug("stopAudio error:",t)}this.isPlaying=!1,this.isPaused=!1,this.clearHighlightTimer(),this.currentWordIndex=-1}},onAudioEnded(){this.isPlaying=!1,this.isPaused=!1,this.clearHighlightTimer(),this.currentWordIndex=-1},clearHighlightTimer(){this.highlightTimer&&(clearInterval(this.highlightTimer),this.highlightTimer=null)},cleanupAudio(){if(this.audioEl){this.audioEl.onended=null,this.audioEl.onpause=null,this.audioEl.onplay=null,this.audioEl.onloadedmetadata=null;try{this.audioEl.pause()}catch(t){console.debug("audio pause during cleanup failed:",t)}try{this.audioEl.parentNode&&this.audioEl.parentNode.removeChild(this.audioEl)}catch(e){console.debug("remove audioEl from DOM failed:",e)}this.audioEl=null}if(this.audioUrl&&this.audioUrl.startsWith("blob:"))try{URL.revokeObjectURL(this.audioUrl)}catch(e){console.debug("revoke audioUrl failed:",e)}this.audioUrl=null,this.clearHighlightTimer()},downloadAudio(){if(this.audioUrl)try{const t=document.createElement("a");t.href=this.audioUrl,t.download=`${this.audioKey||"audio"}.mp3`,document.body.appendChild(t),t.click(),t.remove()}catch(t){console.error("download failed",t),alert("Download failed: "+(t.message||t))}},useExtractedText(){if(!this.extractedText)return;const t=confirm("Insert extracted text into the textarea and play the generated audio now?");this.mode="text",this.text=this.extractedText,this.onTextInput(),t&&(this.audioKey?this.playKey(this.audioKey).catch(t=>{console.debug("playKey after useExtractedText failed:",t)}):this.requestTts())},async copyRawBrJson(){if(this.rawBrJson)try{const t="string"===typeof this.rawBrJson?this.rawBrJson:JSON.stringify(this.rawBrJson);await navigator.clipboard.writeText(t),alert("Raw BR JSON copied to clipboard")}catch(t){console.error("copyRawBrJson failed",t),alert("Copy failed: "+(t.message||t))}},downloadRawBrJson(){if(this.rawBrJson)try{const t="string"===typeof this.rawBrJson?this.rawBrJson:JSON.stringify(this.rawBrJson,null,2),e=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=`raw-br-${this.audioKey||"extracted"}.json`,document.body.appendChild(a),a.click(),a.remove(),setTimeout(()=>{try{URL.revokeObjectURL(r)}catch(t){}},5e3)}catch(t){console.error("downloadRawBrJson failed",t),alert("Download failed: "+(t.message||t))}},barStyle(t){const e=6+(t+Math.floor(10*this.seed))%8*2;return{height:e+"px"}},onSubmit(){this.requestTts()}}}),T=S,R=(0,n.A)(T,C,k,!1,null,"79353912",null),P=R.exports,B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"puppetron container py-4"},[e("h1",[t._v("BR REST API")]),e("form",{ref:"formtron",attrs:{id:"formtron"},on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],attrs:{type:"url",name:"url",required:"",placeholder:"Enter a URL"},domProps:{value:t.url},on:{paste:t.onPaste,focus:t.onFocus,blur:t.onBlur,input:function(e){e.target.composing||(t.url=e.target.value)}}}),e("br"),e("div",{staticClass:"actions-grid"},t._l(t.actions,function(r){return e("button",{key:r,class:{active:t.action===r},attrs:{type:"submit",name:r},on:{click:function(e){return t.setAction(r)}}},[t._v(" "+t._s(t.labelFor(r))+" ")])}),0),"scrape"===t.action?e("div",{staticClass:"scrape-controls"},[t._m(0),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.selectors,expression:"selectors"}],attrs:{id:"selectors",placeholder:"输入 CSS 选择器, 每行一个. 如:h1 ｜ a ｜ div | .article | .title 等",rows:"6"},domProps:{value:t.selectors},on:{input:function(e){e.target.composing||(t.selectors=e.target.value)}}}),e("p",{staticClass:"hint"},[t._v("如果留空，则只会使用 URL 调用抓取程序.")])]):t._e()]),t._m(1)])},A=[function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"selectors"}},[e("strong",[t._v("Scrape 标签选择器 (每行一个)")])])},function(){var t=this,e=t._self._c;return e("footer",[e("p",[t._v(" REST API 为常见的浏览器操作提供端点，例如屏幕截图、提取 HTML 内容、生成 PDF 等。以下是可用选项："),e("br"),e("ul",[e("li",[t._v("/content - Fetch HTML")]),e("li",[t._v("/screenshot - Capture screenshot")]),e("li",[t._v("/pdf - Render PDF")]),e("li",[t._v("/snapshot - Take a webpage snapshot")]),e("li",[t._v("/scrape - Scrape HTML elements")]),e("li",[t._v("/json - Capture structured data using AI")]),e("li",[t._v("/links - Retrieve links from a webpage")]),e("li",[t._v("/markdown - Extract Markdown from a webpage")])])])])}],E=(r(8111),r(2489),r(1701),{name:"ContentGenPuppetron",data(){return{url:"",action:"content",protocol:"http://",currentObjectUrl:null,actions:["content","snapshot","screenshot","pdf","scrape","json","links","markdown"],selectors:""}},methods:{encode(t){return encodeURIComponent(t)},setAction(t){this.actions.includes(t)?this.action=t:this.action="content"},labelFor(t){const e={content:"Content",snapshot:"Snapshot",screenshot:"Screenshot",pdf:"PDF",scrape:"Scrape",json:"JSON",links:"Links",markdown:"Markdown"};return e[t]||t},async onSubmit(){if(!this.url||!this.url.startsWith("http://")&&!this.url.startsWith("https://"))return void alert("Please enter a valid URL including http:// or https://");const t=new URLSearchParams({url:this.url});if("screenshot"!==this.action&&"snapshot"!==this.action||(t.set("width",String(window.innerWidth)),t.set("height",String(window.innerHeight))),"scrape"===this.action){const e=(this.selectors||"").split(/\r?\n/).map(t=>t.trim()).filter(Boolean);if(e.length){const r=e.map(t=>({selector:t}));t.set("elements",JSON.stringify(r))}}const e=`/${this.action}?${t.toString()}`;try{const t=await fetch(e,{method:"GET"});if(!t.ok){const e=await t.text().catch(()=>"");throw new Error(`Server returned ${t.status}: ${e}`)}const r=(t.headers.get("content-type")||"").toLowerCase();if(r.includes("image/")){const e=await t.blob();this.applyPreviewFromBlob(e,"image")}else if(r.includes("application/pdf")){const e=await t.blob();this.applyPreviewFromBlob(e,"pdf")}else if(r.includes("text/html")||r.includes("application/json")||r.includes("text/plain")){const e=await t.text();if(r.includes("text/html"))this.showHtmlPreview(e);else if(r.includes("application/json"))try{const t=JSON.parse(e);this.showHtmlPreview(`<pre>${this.escapeHtml(JSON.stringify(t,null,2))}</pre>`)}catch{this.showHtmlPreview(`<pre>${this.escapeHtml(e)}</pre>`)}else this.showHtmlPreview(`<pre>${this.escapeHtml(e)}</pre>`)}else{const e=await t.blob();this.applyPreviewFromBlob(e,"binary")}}catch(r){console.error(r),alert("Request failed: "+(r.message||r))}},applyPreviewFromBlob(t,e){if(this.currentObjectUrl){try{URL.revokeObjectURL(this.currentObjectUrl)}catch(o){}this.currentObjectUrl=null}const r=URL.createObjectURL(t);if(this.currentObjectUrl=r,"image"===e||"pdf"===e||"binary"===e)return void window.open(r,"_blank");const a="pdf"===e?"pdf":"image"===e?"png":"bin",s=this.suggestFilename(a),i=document.createElement("a");i.href=r,i.download=s,document.body.appendChild(i),i.click(),i.remove()},showHtmlPreview(t){const e=window.open("","_blank");e?(e.document.open(),e.document.write(t),e.document.close()):alert("Preview blocked by browser. You can configure to allow popups for preview.")},onPaste(t){const e=t.clipboardData.getData("text")||"";(e.startsWith("http://")||e.startsWith("https://"))&&(t.preventDefault(),this.url=e)},onFocus(){""===this.url.trim()&&(this.url=this.protocol)},onBlur(){this.url.trim()===this.protocol&&(this.url="")},suggestFilename(t){try{const e=new URL(this.url),r=new RegExp("[\\\\/\\?=&:\\s]+","g"),a=t=>t.replace(r,"_").replace(/^_+|_+$/g,""),s=a(e.hostname||"site"),i=a(e.pathname||""),o=i?`${s}_${i}`:s;return`capture_${o}.${t}`}catch{return`capture.${t}`}},escapeHtml(t){return t.replace(/[&<>"']/g,t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]))}},beforeDestroy(){if(this.currentObjectUrl)try{URL.revokeObjectURL(this.currentObjectUrl)}catch(t){}},beforeUnmount(){if(this.currentObjectUrl)try{URL.revokeObjectURL(this.currentObjectUrl)}catch(t){}}}),O=E,U=(0,n.A)(O,B,A,!1,null,"b43dc0fe",null),J=U.exports,j=function(){var t=this;t._self._c;return t._m(0)},I=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"container py-4"},[e("h2",[t._v("Use browser rendering with AI")]),e("p",{staticClass:"text-muted"},[t._v("示例页面：在这里展示AI内容生成相关功能或示例。")])])}],L={name:"ContentGen"},N=L,F=(0,n.A)(N,j,I,!1,null,"f2107a9e",null),H=F.exports,W=function(){var t=this;t._self._c;return t._m(0)},M=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"container py-4"},[e("h2",[t._v("rest API example")]),e("p",{staticClass:"text-muted"},[t._v("示例页面：在这里展示rest API example内容生成相关功能或示例。")])])}],D={name:"ContentGen"},$=D,q=(0,n.A)($,W,M,!1,null,"aed3f2d8",null),G=q.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"br-intro container py-4"},[e("h2",{staticClass:"mb-3"},[t._v("Introduction")]),e("p",{staticClass:"text-muted"}),e("div",{attrs:{id:"accordionExample","aria-multiselectable":"false"}},[e("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab",id:"headingOne"}},[e("h2",{staticClass:"mb-0"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseOne",modifiers:{collapseOne:!0}}],staticClass:"text-left",attrs:{variant:"link",block:""}},[t._v(" 什么是Browser Rendering？ ")])],1)]),e("b-collapse",{staticClass:"border-top",attrs:{id:"collapseOne",accordion:"accordionExample",role:"tabpanel","aria-labelledby":"headingOne",block:""}},[e("b-card-body",[t._v(" Browser Rendering 使开发人员能够以编程方式控制和与 Cloudflare 全球网络上运行的无头(headless)浏览器实例进行交互，实现自动化浏览器交互、截取屏幕截图、生成 PDF 以及从网页提取数据等任务。 ")])],1)],1),e("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab",id:"headingTwo"}},[e("h2",{staticClass:"mb-0"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseTwo",modifiers:{collapseTwo:!0}}],staticClass:"text-left",attrs:{variant:"link",block:""}},[t._v(" Free Plan & Paid Plan 使用 BR 有什么区别？ ")])],1)]),e("b-collapse",{staticClass:"border-top",attrs:{id:"collapseTwo",accordion:"accordionExample",role:"tabpanel","aria-labelledby":"headingTwo"}},[e("b-card-body",[t._v(" Workers Free 和 Workers Paid plan 的客户都可以使用 Browser Rendering。 "),e("div",{staticClass:"compare-table mt-3"},[e("div",{staticClass:"table-row header-row"},[e("div",{staticClass:"col col-feature"},[t._v("Feature")]),e("div",{staticClass:"col col-free text-center"},[t._v("Free Plan")]),e("div",{staticClass:"col col-paid text-center"},[t._v("Paid Plan")])]),t._l(t.rows,function(r,a){return e("div",{key:a,staticClass:"table-row",class:{"last-row":a===t.rows.length-1}},[e("div",{staticClass:"col col-feature"},[e("div",{staticClass:"feature-text"},[t._v(t._s(r.feature))])]),e("div",{staticClass:"col col-free text-center"},[e("div",{staticClass:"cell-text"},[t._v(t._s(r.free))])]),e("div",{staticClass:"col col-paid text-center"},[e("div",{staticClass:"cell-text"},[t._v(t._s(r.paid))])])])})],2)])],1)],1),e("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab",id:"headingThree"}},[e("h2",{staticClass:"mb-0"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseThree",modifiers:{collapseThree:!0}}],staticClass:"text-left",attrs:{variant:"link",block:""}},[t._v(" BR 可以结合哪些产品使用？ ")])],1)]),e("b-collapse",{staticClass:"border-top",attrs:{id:"collapseThree",accordion:"accordionExample",role:"tabpanel","aria-labelledby":"headingThree"}},[e("b-card-body",[t._v(" Browser Rendering 可以结合 Cloudflare 的 Workers、Durable Objects、Agents (MCP)、workers AI、R2、KV storage 等。 "),e("div",{staticClass:"diagram-wrapper mt-3"},[e("img",{staticClass:"img-fluid diagram-img",attrs:{src:r(7914),alt:t.imageAlt}})])])],1)],1),e("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab",id:"headingFour"}},[e("h2",{staticClass:"mb-0"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseFour",modifiers:{collapseFour:!0}}],staticClass:"text-left",attrs:{variant:"link",block:""}},[t._v(" BR 的2种使用方式？ ")])],1)]),e("b-collapse",{staticClass:"border-top",attrs:{id:"collapseFour",accordion:"accordionExample",role:"tabpanel","aria-labelledby":"headingFour"}},[e("b-card-body",[e("p",[e("strong",{staticStyle:{color:"skyblue"}},[t._v("REST API")]),t._v("：最适合执行简单的无状态任务，例如截取屏幕截图、生成 PDF、提取 HTML 内容等； ")]),e("p",[e("strong",{staticStyle:{color:"skyblue"}},[t._v("Workers Bindings")]),t._v("：最适合在 Cloudflare Workers 中实现高级浏览器自动化； ")])])],1)],1),e("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab",id:"headingFive"}},[e("h2",{staticClass:"mb-0"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseFive",modifiers:{collapseFive:!0}}],staticClass:"text-left",attrs:{variant:"link",block:""}},[t._v(" BR 的优势 ")])],1)]),e("b-collapse",{staticClass:"border-top",attrs:{id:"collapseFive",accordion:"accordionExample",role:"tabpanel","aria-labelledby":"headingFive"}},[e("b-card-body",[e("p",[t._v("1. "),e("strong",{staticStyle:{color:"skyblue"}},[t._v("可扩展至数千个浏览器")]),t._v("：即时访问全球浏览器池，冷启动时间短，非常适合大规模屏幕截图生成、数据提取或自动化操作。")]),e("p",[t._v("2. "),e("strong",{staticStyle:{color:"skyblue"}},[t._v("默认全球部署")]),t._v("：浏览器会话运行在 Cloudflare 的边缘网络上，靠近终端用户，从而提升速度和全球可用性。")]),e("p",[t._v("3. "),e("strong",{staticStyle:{color:"skyblue"}},[t._v("易于集成")]),t._v("：提供用于常用操作的 REST API，同时还提供 "),e("strong",[t._v("Puppeteer")]),t._v(" 和 "),e("strong",[t._v("Playwright ")]),t._v("等常用自动化library，方便处理复杂的工作流程。")]),e("p",[t._v("4. "),e("strong",{staticStyle:{color:"skyblue"}},[t._v("会话管理")]),t._v("：在请求之间复用浏览器会话，提升性能并降低冷启动消耗。")])])],1)],1),e("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab",id:"headingSix"}},[e("h2",{staticClass:"mb-0"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseSix",modifiers:{collapseSix:!0}}],staticClass:"text-left",attrs:{variant:"link",block:""}},[t._v(" 常用case ")])],1)]),e("b-collapse",{staticClass:"border-top",attrs:{id:"collapseSix",accordion:"accordionExample",role:"tabpanel","aria-labelledby":"headingSix"}},[e("b-card-body",[e("div",{staticClass:"list-group"},[e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"}},[e("div",{staticClass:"d-flex w-100 justify-content-between"},[e("h5",{staticClass:"mb-1",staticStyle:{color:"skyblue"}},[t._v("1.自动从网站提取结构化数据")])]),e("p",{staticClass:"mb-1"},[t._v(" 我的使用场景是需要从电商店铺页面提取结构化数据（JSON格式），例如标题、描述、图片URL、价格等。"),e("br"),t._v(" 以前，手动从eBay抓取价格需要3-4天时间。现在我们使用 BR 实现了自动化。"),e("br"),t._v(" 我们在企业入驻过程中进行数据丰富，需要抓取大量数据。"),e("br")])]),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"}},[e("div",{staticClass:"d-flex w-100 justify-content-between"},[e("h5",{staticClass:"mb-1",staticStyle:{color:"skyblue"}},[t._v("2.大规模从网页和 HTML 内容生成 PDF")]),e("small",{staticClass:"text-muted"})]),e("p",{staticClass:"mb-1"},[t._v("我们用它来让用户生成并下载PDF格式的许可证和收据。"),e("br"),t._v(" 我们使用Puppeteer生成各种格式的网络研讨会证书。"),e("br")]),e("div",{staticClass:"diagram-wrapper mt-3"},[e("img",{staticClass:"img-fluid diagram-img",attrs:{src:r(103),alt:t.imageAlt}})]),e("small",{staticClass:"text-muted"})]),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"}},[e("div",{staticClass:"d-flex w-100 justify-content-between"},[e("h5",{staticClass:"mb-1",staticStyle:{color:"skyblue"}},[t._v("3.创建网站缩略图和社交预览")]),e("small",{staticClass:"text-muted"})]),e("p",{staticClass:"mb-1"},[t._v("我们正在使用 API 为社区创建的网站生成截图预览。"),e("br"),t._v(" 我们的仪表板展示了客户创建的网页内容……我们需要为他们所做的更改生成缩略图。"),e("br"),t._v(" 为共享内容提供预览图像的支持。"),e("br")]),e("small",{staticClass:"text-muted"})]),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"}},[e("div",{staticClass:"d-flex w-100 justify-content-between"},[e("h5",{staticClass:"mb-1",staticStyle:{color:"skyblue"}},[t._v("4.监控和扫描 Web 内容")]),e("small",{staticClass:"text-muted"})]),e("p",{staticClass:"mb-1"},[t._v("CF Radar 的 "),e("a",{attrs:{href:"https://radar.cloudflare.com/scan",target:"_blank",rel:"noopener noreferrer"}},[t._v("URL 扫描器")]),t._v("使用 BR 来加载和呈现网页，以捕获 DOM 快照、网络日志（HAR）及不同设备尺寸下的屏幕截图，用于网站分析。"),e("br"),t._v(" CF 为每期新发布的时事通讯截取一张屏幕截图/生成一份 PDF，并将其保存在 R2 中。"),e("br"),t._v(" 为 AI 分析客户线索进行批量截图。"),e("br"),t._v(" CF 构建了这个很酷的技术栈查找工具，用于扫描网站。"),e("br")]),e("small",{staticClass:"text-muted"})]),e("a",{staticClass:"list-group-item list-group-item-action",attrs:{href:"#"}},[e("div",{staticClass:"d-flex w-100 justify-content-between"},[e("h5",{staticClass:"mb-1",staticStyle:{color:"skyblue"}},[t._v("5.在 Web 上赋能 AI Agent ")]),e("small",{staticClass:"text-muted"})]),e("p",{staticClass:"mb-1"},[t._v("我们正在构建一个模型，以帮助用户完成任务——比如办理航班登机手续。"),e("br"),t._v(" 我们使用 BR 从静态网站获取数据用于检索增强型生成（RAG）。"),e("br"),t._v(" 为 AI 分析客户线索进行批量截图。"),e("br"),t._v(" 我们会对网站和其他由我们的 AI 代理生成的资产进行截图。"),e("br")]),e("small",{staticClass:"text-muted"})])])])],1)],1),e("b-card",{staticClass:"mb-2",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab",id:"headingSeven"}},[e("h2",{staticClass:"mb-0"},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseSeven",modifiers:{collapseSeven:!0}}],staticClass:"text-left",attrs:{variant:"link",block:""}},[t._v(" BR 的计费与定价说明 ")])],1)]),e("b-collapse",{staticClass:"border-top",attrs:{id:"collapseSeven",accordion:"accordionExample",role:"tabpanel","aria-labelledby":"headingSeven"}},[e("b-card-body",[e("p",[t._v("1. "),e("strong",{staticStyle:{color:"skyblue"}},[t._v("REST API")]),t._v(": Charged for Duration only ($/browser hour)")]),e("p",[t._v("2. "),e("strong",{staticStyle:{color:"skyblue"}},[t._v("Workers Bindings")]),t._v(": Charged for both Duration and Concurrency ($/browser hour + # of concurrent browsers)")])])],1)],1)],1)])},z=[],Y={name:"BrIntroduction",data(){return{rows:[{feature:"Concurrent browsers per account (Workers Bindings only)",free:"3 per account",paid:"30 per account"},{feature:"New browser instances per minute (Workers Bindings only)",free:"3 per minute",paid:"30 per minute"},{feature:"Browser timeout",free:"60 seconds",paid:"60 seconds"},{feature:"Total requests per min (REST API only)",free:"6 per minute",paid:"180 per minute"}]}}},V=Y,X=(0,n.A)(V,K,z,!1,null,"79c94e4e",null),Q=X.exports;a["default"].use(g.Ay);const Z=[{path:"/",redirect:"/br-guides"},{path:"/br-introduction",name:"BrIntroduction",component:Q},{path:"/br-guides",name:"BrGuides",component:_},{path:"/make-browser-talk",name:"MakeBrowserTalk",component:P},{path:"/content-generation",name:"ContentGen",component:J},{path:"/br-withai",name:"BrWithAI",component:H},{path:"/rest-apiexample",name:"RestAPIExample",component:G},{path:"*",redirect:"/"}];var tt=new g.Ay({mode:"hash",routes:Z}),et=(r(9313),r(1501)),rt=r(7673);a["default"].use(et.vGs),a["default"].use(rt.YS),a["default"].config.productionTip=!1,a["default"].component("BrHeader",u),new a["default"]({router:tt,render:t=>t(b)}).$mount("#app")},7914:function(t,e,r){t.exports=r.p+"img/br.drawio.05c6ca52.png"}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,r),i.exports}r.m=t,function(){var t=[];r.O=function(e,a,s,i){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],s=t[d][1],i=t[d][2];for(var l=!0,n=0;n<a.length;n++)(!1&i||o>=i)&&Object.keys(r.O).every(function(t){return r.O[t](a[n])})?a.splice(n--,1):(l=!1,i<o&&(o=i));if(l){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[a,s,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,i,o=a[0],l=a[1],n=a[2],c=0;if(o.some(function(e){return 0!==t[e]})){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(n)var d=n(r)}for(e&&e(a);c<o.length;c++)i=o[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(d)},a=self["webpackChunkbrdemo1"]=self["webpackChunkbrdemo1"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[504],function(){return r(2838)});a=r.O(a)})();
//# sourceMappingURL=app.93ee29c2.js.map